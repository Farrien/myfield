(function(a){a(["jquery"],function(c){var d=(function(){var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function f(A,L,J,j,k,T){if(isNaN(T)||T<1){return}T|=0;var q=g(A);var ac=q.getContext("2d");var X;try{try{X=ac.getImageData(L,J,j,k)}catch(ab){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");X=ac.getImageData(L,J,j,k)}catch(ab){alert("Cannot access local image");throw new Error("unable to access local image data: "+ab)}}}catch(ab){alert("Cannot access image");throw new Error("unable to access image data: "+ab)}var o=X.data;var R,Q,Z,W,z,D,u,m,n,I,v,K,G,O,S,B,t,C,E,N,s;var aa=T*2+1;var w=j-1;var V=k-1;var r=T+1;var U=r*(r+1)/2;var M=new h();var H=M;for(Z=1;Z<aa;Z++){H=H.next=new h();if(Z===r){s=H}}H.next=M;var Y=null;var P=null;u=D=0;var F=e[T];var l=i[T];for(Q=0;Q<k;Q++){O=S=B=m=n=I=0;v=r*(t=o[D]);K=r*(C=o[D+1]);G=r*(E=o[D+2]);m+=U*t;n+=U*C;I+=U*E;H=M;for(Z=0;Z++<r;){H.r=t;H.g=C;H.b=E;H=H.next}for(Z=0;++Z<r;){W=D+((w<Z?w:Z)<<2);m+=(H.r=(t=o[W]))*(N=r-Z);n+=(H.g=(C=o[W+1]))*N;I+=(H.b=(E=o[W+2]))*N;O+=t;S+=C;B+=E;H=H.next}Y=M;P=s;for(R=0;R<j;R++){o[D]=(m*F)>>l;o[D+1]=(n*F)>>l;o[D+2]=(I*F)>>l;m-=v;n-=K;I-=G;v-=Y.r;K-=Y.g;G-=Y.b;W=(u+((W=R+T+1)<w?W:w))<<2;O+=(Y.r=o[W]);S+=(Y.g=o[W+1]);B+=(Y.b=o[W+2]);m+=O;n+=S;I+=B;Y=Y.next;v+=(t=P.r);K+=(C=P.g);G+=(E=P.b);O-=t;S-=C;B-=E;P=P.next;D+=4}u+=j}for(R=0;R<j;R++){S=B=O=n=I=m=0;D=R<<2;v=r*(t=o[D]);K=r*(C=o[D+1]);G=r*(E=o[D+2]);m+=U*t;n+=U*C;I+=U*E;H=M;for(Z=0;Z<r;Z++){H.r=t;H.g=C;H.b=E;H=H.next}z=j;for(Z=1;Z<=T;Z++){D=(z+R)<<2;m+=(H.r=(t=o[D]))*(N=r-Z);n+=(H.g=(C=o[D+1]))*N;I+=(H.b=(E=o[D+2]))*N;O+=t;S+=C;B+=E;H=H.next;if(Z<V){z+=j}}D=R;Y=M;P=s;for(Q=0;Q<k;Q++){W=D<<2;o[W]=(m*F)>>l;o[W+1]=(n*F)>>l;o[W+2]=(I*F)>>l;m-=v;n-=K;I-=G;v-=Y.r;K-=Y.g;G-=Y.b;W=(R+(((W=Q+r)<V?W:V)*j))<<2;m+=(O+=(Y.r=o[W]));n+=(S+=(Y.g=o[W+1]));I+=(B+=(Y.b=o[W+2]));Y=Y.next;v+=(t=P.r);K+=(C=P.g);G+=(E=P.b);O-=t;S-=C;B-=E;P=P.next;D+=j}}ac.putImageData(X,L,J)}function h(){this.r=this.b=this.g=0;this.next=null}function g(j){if(j.nodeType==1){return j}return document.getElementById(j)}return f})();var b=/[^a-zA-Z0-9]/g;b.regexp=function(){b.lastIndex=0;return b};typeof Storage==="undefined"&&(Storage={});Storage.prototype.cacheChecksum=function(h,k){var f="";for(var e in h){var j=h[e];if(c.isPlainObject(j)){f+=(j.x.toString()+j.y.toString()+",").replace(b.regexp(),"")}else{if(typeof j==="object"){f+=j.nodeName+"#"+j.id+"."+j.className}else{f+=(j+",").replace(b.regexp(),"")}}}var i=this.getItem(h.cacheKeyPrefix+h.selector+"-"+k+"-options-cache");if(i!=f){this.removeItem(h.cacheKeyPrefix+h.selector+"-"+k+"-options-cache");try{this.setItem(h.cacheKeyPrefix+h.selector+"-"+k+"-options-cache",f)}catch(g){typeof console!=="undefined"&&console.warn(g)}h.debug&&console.log("Settings Changed, Cache Emptied")}};c.fn.blurjs=function(o){if(!this.length){if(o.onReady){o.onReady()}return this}var i=this;var f=document.createElement("canvas");if(!f.getContext){return this}o=c.extend({source:document.body,selector:this.selector.replace(b.regexp(),""),radius:5,overlay:"",offset:{x:0,y:0},optClass:"",cache:false,cacheKeyPrefix:"blurjs-",draggable:false,debug:false,useCss:true,onReady:null},o);var j=c(o.source);var g=j.css("backgroundImage").replace(/"/g,"").replace(/url\(|\)$/ig,"");var k=j.offset();var n={"background-repeat":j.css("backgroundRepeat"),"background-size":j.css("backgroundSize"),"background-attachment":j.css("backgroundAttachment")};function e(s,u){s=c(s);var t=s.offset();var q=c.extend({"background-image":'url("'+u+'")',"background-position":(n["background-attachment"]=="fixed")?"":"-"+((t.left)-(k.left)-(o.offset.x))+"px -"+((t.top)-(k.top)-(o.offset.y))+"px"},n);if(o.optClass){s.addClass(o.optClass)}if(o.draggable){c.extend(q,{"background-attachment":"fixed","background-position":"0 0"});s.draggable()}if(o.useCss){var r="{";for(var p in q){if(q[p]&&q.hasOwnProperty(p)){r+=p+":"+q[p]+";"}}c('head style[data-selector="blurjs-'+i.selector+'"]').remove();c('<style data-selector="blurjs-'+i.selector+'">'+i.selector+r+"}<style>").appendTo("head");return false}s.css(q)}var h;if(o.cache){localStorage.cacheChecksum(o,g);h=localStorage.getItem(o.cacheKeyPrefix+o.selector+"-"+g+"-data-image")}if(h){o.debug&&console.log("Cache Used");this.each(function(){return e(this,h)});o.onReady&&o.onReady();return i}else{var m=f.getContext("2d"),l=new Image();l.onload=function(){var p;f.style.display="none";f.width=l.width;f.height=l.height;m.drawImage(l,0,0);d(f,0,0,f.width,f.height,o.radius,1);if(o.overlay){m.beginPath();m.rect(0,0,l.width,l.width);m.fillStyle=o.overlay;m.fill()}p=f.toDataURL();if(o.cache){try{o.debug&&console.log("Cache Set");localStorage.setItem(o.cacheKeyPrefix+o.selector+"-"+g+"-data-image",p)}catch(q){typeof console!=="undefined"&&console.log(q)}}o.debug&&console.log("Source Used");i.each(function(){return e(this,p)});o.onReady&&o.onReady()};l.src=g;return i}};return c})})(typeof define==="function"&&define.amd?define:function(b,a){a(jQuery)});
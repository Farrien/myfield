(function(a){a(["jquery"],function(c){var d=(function(){var e=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1];var f=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];function g(m,P,N,E,w,n,J){function l(){this.b=this.g=this.r=0;this.next=null}if(isNaN(n)||n<1){return}n|=0;if(isNaN(J)){J=1}J|=0;if(J>3){J=3}if(J<1){J=1}var k=m.getContext("2d");var K;try{try{K=k.getImageData(P,N,E,w)}catch(O){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");K=k.getImageData(P,N,E,w)}catch(O){alert("Cannot access local image");throw new Error("unable to access local image data: "+O)}}}catch(O){alert("Cannot access image");throw new Error("unable to access image data: "+O)}var z=K.data;var s,r,I,B,L,S,D,A,M,G,F,R,h;var u=n+n+1;var q=E-1;var v=w-1;var Q=n+1;var t=new l();var o=t;for(I=1;I<u;I++){o=o.next=new l()}o.next=t;var j=null;var H=e[n];var C=f[n];while(J-->0){D=S=0;for(r=w;--r>-1;){A=Q*(F=z[S]);M=Q*(R=z[S+1]);G=Q*(h=z[S+2]);o=t;for(I=Q;--I>-1;){o.r=F;o.g=R;o.b=h;o=o.next}for(I=1;I<Q;I++){B=S+((q<I?q:I)<<2);A+=(o.r=z[B++]);M+=(o.g=z[B++]);G+=(o.b=z[B]);o=o.next}j=t;for(s=0;s<E;s++){z[S++]=(A*H)>>>C;z[S++]=(M*H)>>>C;z[S++]=(G*H)>>>C;S++;B=(D+((B=s+n+1)<q?B:q))<<2;A-=j.r-(j.r=z[B++]);M-=j.g-(j.g=z[B++]);G-=j.b-(j.b=z[B]);j=j.next}D+=E}for(s=0;s<E;s++){S=s<<2;A=Q*(F=z[S++]);M=Q*(R=z[S++]);G=Q*(h=z[S]);o=t;for(I=0;I<Q;I++){o.r=F;o.g=R;o.b=h;o=o.next}L=E;for(I=1;I<=n;I++){S=(L+s)<<2;A+=(o.r=z[S++]);M+=(o.g=z[S++]);G+=(o.b=z[S]);o=o.next;if(I<v){L+=E}}S=s;j=t;for(r=0;r<w;r++){B=S<<2;z[B]=(A*H)>>>C;z[B+1]=(M*H)>>>C;z[B+2]=(G*H)>>>C;B=(s+(((B=r+Q)<v?B:v)*E))<<2;A-=j.r-(j.r=z[B]);M-=j.g-(j.g=z[B+1]);G-=j.b-(j.b=z[B+2]);j=j.next;S+=E}}}k.putImageData(K,P,N)}return g})();var b=/[^a-zA-Z0-9]/g;b.regexp=function(){b.lastIndex=0;return b};typeof Storage==="undefined"&&(Storage={});Storage.prototype.cacheChecksum=function(h,k){var f="";for(var e in h){var j=h[e];if(c.isPlainObject(j)){f+=(j.x.toString()+j.y.toString()+",").replace(b.regexp(),"")}else{if(typeof j==="object"){f+=j.nodeName+"#"+j.id+"."+j.className}else{f+=(j+",").replace(b.regexp(),"")}}}var i=this.getItem(h.cacheKeyPrefix+h.selector+"-"+k+"-options-cache");if(i!=f){this.removeItem(h.cacheKeyPrefix+h.selector+"-"+k+"-options-cache");try{this.setItem(h.cacheKeyPrefix+h.selector+"-"+k+"-options-cache",f)}catch(g){typeof console!=="undefined"&&console.warn(g)}h.debug&&console.log("Settings Changed, Cache Emptied")}};c.fn.blurjs=function(o){if(!this.length){if(o.onReady){o.onReady()}return this}var i=this;var f=document.createElement("canvas");if(!f.getContext){return this}o=c.extend({source:document.body,selector:this.selector.replace(b.regexp(),""),radius:5,overlay:"",offset:{x:0,y:0},optClass:"",cache:false,cacheKeyPrefix:"blurjs-",draggable:false,debug:false,useCss:true,onReady:null},o);var j=c(o.source);var g=j.css("backgroundImage").replace(/"/g,"").replace(/url\(|\)$/ig,"");var k=j.offset();var n={"background-repeat":j.css("backgroundRepeat"),"background-size":j.css("backgroundSize"),"background-attachment":j.css("backgroundAttachment")};function e(s,u){s=c(s);var t=s.offset();var q=c.extend({"background-image":'url("'+u+'")',"background-position":(n["background-attachment"]=="fixed")?"":"-"+((t.left)-(k.left)-(o.offset.x))+"px -"+((t.top)-(k.top)-(o.offset.y))+"px"},n);if(o.optClass){s.addClass(o.optClass)}if(o.draggable){c.extend(q,{"background-attachment":"fixed","background-position":"0 0"});s.draggable()}if(o.useCss){var r="{";for(var p in q){if(q[p]&&q.hasOwnProperty(p)){r+=p+":"+q[p]+";"}}c('head style[data-selector="blurjs-'+i.selector+'"]').remove();c('<style data-selector="blurjs-'+i.selector+'">'+i.selector+r+"}<style>").appendTo("head");return false}s.css(q)}var h;if(o.cache){localStorage.cacheChecksum(o,g);h=localStorage.getItem(o.cacheKeyPrefix+o.selector+"-"+g+"-data-image")}if(h){o.debug&&console.log("Cache Used");this.each(function(){return e(this,h)});o.onReady&&o.onReady();return i}else{var m=f.getContext("2d"),l=new Image();l.onload=function(){var p;f.style.display="none";f.width=l.width;f.height=l.height;m.drawImage(l,0,0);d(f,0,0,f.width,f.height,o.radius,1);if(o.overlay){m.beginPath();m.rect(0,0,l.width,l.width);m.fillStyle=o.overlay;m.fill()}p=f.toDataURL();if(o.cache){try{o.debug&&console.log("Cache Set");localStorage.setItem(o.cacheKeyPrefix+o.selector+"-"+g+"-data-image",p)}catch(q){typeof console!=="undefined"&&console.log(q)}}o.debug&&console.log("Source Used");i.each(function(){return e(this,p)});o.onReady&&o.onReady()};l.src=g;return i}};return c})})(typeof define==="function"&&define.amd?define:function(b,a){a(jQuery)});
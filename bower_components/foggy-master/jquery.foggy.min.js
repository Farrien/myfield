(function(a){a.fn.foggy=function(c){var b={opacity:0.8,blurRadius:2,quality:16,cssFilterSupport:true};var h={opacity:1,blurRadius:0};var g;if(c==false){g=a.extend(b,h)}else{g=a.extend(b,c)}var f=function(l,j,m,k){this.content=l;this.position=j;this.offset=m;this.opacity=k};f.prototype.render=function(j){a("<div/>",{html:this.content,"class":"foggy-pass-"+this.position}).css({position:this.position,opacity:this.opacity,top:this.offset[0],left:this.offset[1]}).appendTo(j)};var e=function(j){this.radius=j};e.prototype.includes=function(j,k){if(Math.pow(j,2)+Math.pow(k,2)<=Math.pow(this.radius,2)){return true}else{return false}};e.prototype.points=function(){var k=[];for(var j=-this.radius;j<=this.radius;j++){for(var l=-this.radius;l<=this.radius;l++){if(this.includes(j,l)){k.push([j,l])}}}return k};var d=function(j,k){this.element=j;this.settings=k};d.prototype.calculateOffsets=function(j,p){var o=a.grep(new e(j).points(),function(q){return(q[0]!=0)||(q[1]!=0)});var n;if(o.length<=p){n=o}else{var l=o.length-p;var k=[];for(var m=0;m<l;m++){k.push(Math.round(m*(o.length/l)))}n=a.grep(o,function(r,q){if(a.inArray(q,k)>=0){return false}else{return true}})}return n};d.prototype.getContent=function(){var j=a(this.element).find(".foggy-pass-relative")[0];if(j){return a(j).html()}else{return a(this.element).html()}};d.prototype.render=function(){var l=this.getContent();a(this.element).empty();var m=a("<div/>").css({position:"relative"});var k=this.calculateOffsets(this.settings.blurRadius*2,this.settings.quality);var j=(this.settings.opacity*1.2)/(k.length+1);new f(l,"relative",[0,0],j).render(m);a(k).each(function(n,o){new f(l,"absolute",o,j).render(m)});m.appendTo(this.element)};var i=function(j,k){this.element=j;this.settings=k};i.prototype.render=function(){var k=(""+g.opacity).slice(2,4);var j=this.settings.blurRadius;a(this.element).css({"-webkit-filter":"blur("+j+"px)",opacity:g.opacity})};return this.each(function(j,k){if(g.cssFilterSupport&&"-webkit-filter" in document.body.style){new i(k,g).render()}else{new d(k,g).render()}})}})(jQuery);
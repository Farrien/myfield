(function(a){a.fn.foggy=function(e){var j={opacity:0.8,blurRadius:2,quality:16,cssFilterSupport:true};var g={opacity:1,blurRadius:0};var d;if(e==false){d=a.extend(j,g)}else{d=a.extend(j,e)}var f=function(l,i,m,k){this.content=l;this.position=i;this.offset=m;this.opacity=k};f.prototype.render=function(i){a("<div/>",{html:this.content,"class":"foggy-pass-"+this.position}).css({position:this.position,opacity:this.opacity,top:this.offset[0],left:this.offset[1]}).appendTo(i)};var h=function(i){this.radius=i};h.prototype.includes=function(k,i){if(Math.pow(k,2)+Math.pow(i,2)<=Math.pow(this.radius,2)){return true}else{return false}};h.prototype.points=function(){var k=[];for(var i=-this.radius;i<=this.radius;i++){for(var l=-this.radius;l<=this.radius;l++){if(this.includes(i,l)){k.push([i,l])}}}return k};var c=function(k,i){this.element=k;this.settings=i};c.prototype.calculateOffsets=function(o,v){var q=a.grep((new h(o)).points(),function(i){return i[0]!=0||i[1]!=0});var m;if(q.length<=v){m=q}else{var p=q.length-v;var l=[];for(var k=0;k<p;k++){l.push(Math.round(k*(q.length/p)))}m=a.grep(q,function(i,r){if(a.inArray(r,l)>=0){return false}else{return true}})}return m};c.prototype.getContent=function(){var i=a(this.element).find(".foggy-pass-relative")[0];if(i){return a(i).html()}else{return a(this.element).html()}};c.prototype.render=function(){var l=this.getContent();a(this.element).empty();var o=a("<div/>").css({position:"relative"});var m=this.calculateOffsets(this.settings.blurRadius*2,this.settings.quality);var k=this.settings.opacity*1.2/(m.length+1);(new f(l,"relative",[0,0],k)).render(o);a(m).each(function(n,i){(new f(l,"absolute",i,k)).render(o)});o.appendTo(this.element)};var b=function(k,i){this.element=k;this.settings=i};b.prototype.render=function(){var i=(""+d.opacity).slice(2,4);var k=this.settings.blurRadius;a(this.element).css({"-webkit-filter":"blur("+k+"px)",opacity:d.opacity})};return this.each(function(k,i){if(d.cssFilterSupport&&"-webkit-filter" in document.body.style){(new b(i,d)).render()}else{(new c(i,d)).render()}})}})(jQuery);